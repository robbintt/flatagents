# FlatAgent Search Refiner - Step 1: Search Agent
# Performs web search via Exa MCP and returns raw results

spec: flatagent
spec_version: "0.6.0"

data:
  name: search-agent

  model:
    provider: cerebras
    name: zai-glm-4.6
    temperature: 1.0
    max_tokens: 2048

  mcp:
    servers:
      exa:
        server_url: "https://mcp.exa.ai/mcp"
        headers:
          x-api-key: "${EXA_API_KEY}"

    tool_filter:
      allow:
        - "exa:web_search_exa"

    tool_prompt: |
      You have access to web search via Exa:
      {% for tool in tools %}
      - {{ tool.name }}: {{ tool.description }}
      {% endfor %}

  system: |
    You are a web search assistant. Your task is to perform accurate searches and return relevant results.
    {{ tools_prompt }}

    Guidelines:
    1. Use the search tool to find information relevant to the query
    2. Return the complete search results
    3. Include all sources and excerpts from the search

  user: |
    Search for: {{ input.query }}

metadata:
  description: "Search agent that performs web searches via Exa"
  tags: ["search", "exa", "mcp"]
