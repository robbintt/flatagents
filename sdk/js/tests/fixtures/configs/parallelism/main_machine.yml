spec: flatmachine
spec_version: "0.4.0"
data:
  name: parallelism_demo
  context:
    document: "This is a sample document for review."
  states:
    initial:
      type: initial
      machine: [legal_review.yml, technical_review.yml, financial_review.yml]
      input:
        document: "{{ context.document }}"
      output_to_context:
        reviews: "{{ output }}"
      transitions:
        - to: synthesize
    synthesize:
      type: final
      agent: reviewer.yml
      input:
        document: "{{ context.document }}"
        type: "synthesizer analyzing these reviews: {{ context.reviews }}"
      output:
        final_assessment: "{{ output }}"